# cake-autortt

## ๐ Language / ่ฏญ่จ / Bahasa / ะฏะทัะบ / ่จ่ช / Ngรดn ngแปฏ / Dil / ุงููุบุฉ

[English](README.md) | [ไธญๆ](README_zh.md) | [Bahasa Indonesia](README_id.md) | [ะัััะบะธะน](README_ru.md) | [ๆฅๆฌ่ช](README_ja.md) | [Tiแบฟng Viแปt](README_vi.md) | [Tรผrkรงe](README_tr.md) | **ุงูุนุฑุจูุฉ**

---

**ูุถุจุท ุชููุงุฆูุงู ูุนุงูู RTT ูู CAKE qdisc ุจูุงุกู ุนูู ุธุฑูู ุงูุดุจูุฉ ุงูููุงุณุฉ**

> [!NOTE]  
> ุฅุฐุง ููุช ุชุจุญุซ ุนู **ุฅุตุฏุงุฑ Ubuntu/Debian**ุ ุชุญูู ูู ูุฌูุฏ `ubuntu-debian/`. ููุน ุฐููุ ูุงุญุธ ุฃู ุฅุตุฏุงุฑ OpenWrt ููุท ูุชู ุงุฎุชุจุงุฑู ุดุฎุตูุงู ููููุงู - ุฅุตุฏุงุฑ Ubuntu/Debian ููุฏู ููุง ูู ูููุฌุชูุน.

`cake-autortt` ูู ุฎุฏูุฉ OpenWrt ุฐููุฉ ุชุฑุงูุจ ุงูุงุชุตุงูุงุช ุงููุดุทุฉ ููุดุจูุฉ ูุชุถุจุท ุชููุงุฆูุงู ูุนุงูู RTT (Round Trip Time) ูู CAKE qdisc ุนูู ูุงุฌูุงุช ุงูุฏุฎู ูุงูุฎุฑุฌ ููุญุตูู ุนูู ุฃุฏุงุก ุดุจูุฉ ูุซุงูู.

## ๐ ููุงุฐุง ูุฐุง ููู ูุชุฌุฑุจุฉ ุงูุฅูุชุฑูุช ุงูุฎุงุตุฉ ุจู

ูุนุธู ุงููุณุชุฎุฏููู ูุนุชุงุฏูู ุนูู ุฃููุงุช ุงูุชุญููู ุงูุณุฑูุนุฉ ููููุงูุน ุงูุฑุฆูุณูุฉ ูุซู YouTube ูNetflix ูGoogle - ูุฐู ุชุณุชุฎุฏู ุดุจูุงุช ุชูุฒูุน ุงููุญุชูู (CDNs) ุงูุชู ุชุถุน ุฎูุงุฏู ูุฑูุจุฉ ุฌุฏุงู ูู ุงููุณุชุฎุฏูููุ ูุนุงุฏุฉ ูุง ุชููุฑ ุฃููุงุช ุงุณุชุฌุงุจุฉ ุฃูู ูู 50-100ms. ููุน ุฐููุ ุงูุฅูุชุฑูุช ุฃูุณุน ุจูุซูุฑ ูู ูุฐู ุงูููุตุงุช ุงููุจูุฑุฉ.

**ุนูุฏูุง ุชุชุตูุญ ุงูููุจ ุฎุงุฑุฌ ุงูููุงูุน ุงูุฑุฆูุณูุฉ ุงููุฏุนููุฉ ุจู CDNุ ุชูุงุฌู ุนุงููุงู ูุชููุนุงู ูู ุงูุฎูุงุฏู:**
- **ุงูุฎุฏูุงุช ุงููุญููุฉ/ุงูุฅูููููุฉ**: ุงูุดุฑูุงุช ุงูุตุบูุฑุฉ ูููุงูุน ุงูุฃุฎุจุงุฑ ุงููุญููุฉ ูููุชุฏูุงุช ุงููุฌุชูุน ูุงูุฎุฏูุงุช ุงูุฅูููููุฉ ุบุงูุจุงู ูุง ุชุญุชูู ุนูู ุฎูุงุฏู ูู ุจูุฏู ุฃู ููุทูุชู (10-50ms RTT)
- **ุงููุญุชูู ุงูุฏููู**: ุงูููุงูุน ุงููุชุฎุตุตุฉ ูุงูููุงุฑุฏ ุงูุฃูุงุฏูููุฉ ูุฎูุงุฏู ุงูุฃูุนุงุจ ูุงูุฎุฏูุงุช ุงููุชุฎุตุตุฉ ูุฏ ุชููู ูุณุชุถุงูุฉ ูู ูุงุฑุงุช ุฃุฎุฑู (100-500ms RTT)
- **ุงูุจููุฉ ุงูุชุญุชูุฉ ุงูุจุนูุฏุฉ**: ุจุนุถ ุงูุฎุฏูุงุชุ ุฎุงุตุฉ ูู ุงูููุงุทู ุงููุงููุฉ ุฃู ุงูุชุทุจููุงุช ุงููุชุฎุตุตุฉุ ูุฏ ุชุญุชูู ุนูู ุฒูู ุงุณุชุฌุงุจุฉ ุนุงูู ุจุดูู ูุจูุฑ

**ูุนุงูู CAKE RTT ูุชุญูู ูู ูุฏู ุนุฏูุงููุฉ ุฎูุงุฑุฒููุฉ ุงูุทุงุจูุฑ ูู ุงูุงุณุชุฌุงุจุฉ ููุงุฒุฏุญุงู.** ุงูุชุฑุงุถูุงูุ CAKE ูุณุชุฎุฏู ุงูุชุฑุงุถ RTT 100msุ ูุงูุฐู ูุนูู ุจุดูู ุฌูุฏ ุฅูู ุญุฏ ูุง ูุญุฑูุฉ ุงูุฅูุชุฑูุช ุงูุนุงูุฉ. ููุน ุฐูู:

- **ุฅุนุฏุงุฏ RTT ููุฎูุถ ุฌุฏุงู**: ุฅุฐุง ุงุนุชูุฏ CAKE ุฃู RTT ููุดุจูุฉ ุฃูุตุฑ ููุง ูู ุนููู ูุนูุงูุ ูุตุจุญ ุนุฏูุงููุงู ุฌุฏุงู ูู ุฅุณูุงุท ุงูุญุฒู ุนูุฏ ุชุดููู ุงูุทุงุจูุฑุ ููุง ูุฏ ูููู ูู ุนุฑุถ ุงููุทุงู ููุฎูุงุฏู ุงูุจุนูุฏุฉ
- **ุฅุนุฏุงุฏ RTT ุนุงูู ุฌุฏุงู**: ุฅุฐุง ุงุนุชูุฏ CAKE ุฃู RTT ููุดุจูุฉ ุฃุทูู ููุง ูู ุนููู ูุนูุงูุ ูุตุจุญ ูุญุงูุธุงู ุฌุฏุงู ููุณูุญ ุจุชูููู ุทูุงุจูุฑ ูุจูุฑุฉุ ููุง ูุฎูู ุฒูู ุงุณุชุฌุงุจุฉ ุบูุฑ ุถุฑูุฑู ููุฎูุงุฏู ุงููุฑูุจุฉ

**ุฃูุซูุฉ ุนูู ุงูุชุฃุซูุฑ ูู ุงูุนุงูู ุงูุญูููู:**
- **ูุณุชุฎุฏู ุณูุบุงููุฑุฉ โ ุฎุงุฏู ุฃููุงูู**: ุจุฏูู ุถุจุท RTTุ ูุณุชุฎุฏู ูู ุณูุบุงููุฑุฉ ูุตู ุฅูู ูููุน ุฃููุงูู (โ180ms RTT) ูุฏ ููุงุฌู ุนุฑุถ ูุทุงู ูููู ุจุณุจุจ ุฅุนุฏุงุฏ CAKE ุงูุงูุชุฑุงุถู 100ms ุงูุฐู ูุณุจุจ ุฅุณูุงุท ุญุฒู ูุจูุฑ
- **ุฑูู ุฃูุฑููุง โ ุฎุงุฏู ุฅููููู**: ูุณุชุฎุฏู ูู ุฑูู ุฃูุฑููุง ูุตู ุฅูู ุฎุงุฏู ุฅููููู (โ25ms RTT) ูุฏ ููุงุฌู ุฒูู ุงุณุชุฌุงุจุฉ ุฃุนูู ูู ุงูุถุฑูุฑู ุจุณุจุจ ุฅุนุฏุงุฏ CAKE ุงูุงูุชุฑุงุถู 100ms ุงูุฐู ูุณูุญ ููุทูุงุจูุฑ ุจุงูููู ุฃูุจุฑ ูู ุงููุงุฒู
- **ุชุทุจููุงุช ุงูุฃูุนุงุจ/ุงูููุช ุงูุญูููู**: ุงูุชุทุจููุงุช ุงูุญุณุงุณุฉ ููู ูู ุฒูู ุงูุงุณุชุฌุงุจุฉ ูุนุฑุถ ุงููุทุงู ุชุณุชููุฏ ุจุดูู ูุจูุฑ ูู ุถุจุท RTT ุงูููุงุณุจ ูุธุฑูู ุงูุดุจูุฉ ุงููุนููุฉ

**ููู ูุณุงุนุฏ cake-autortt:**
ุจููุงุณ RTT ุงููุนูู ููุฎูุงุฏู ุงูุชู ุชุชูุงุตู ูุนูุง ุชููุงุฆูุงู ูุถุจุท ูุนุงูู CAKE ูููุงู ูุฐููุ ุชุญุตู ุนูู:
- **ุงุณุชุฌุงุจุฉ ุฃุณุฑุน** ุนูุฏ ุงููุตูู ููุฎูุงุฏู ุงููุฑูุจุฉ (RTT ุฃูุตุฑ โ ุฅุฏุงุฑุฉ ุทุงุจูุฑ ุฃูุซุฑ ุนุฏูุงููุฉ)
- **ุนุฑุถ ูุทุงู ุฃูุถู** ุนูุฏ ุงููุตูู ููุฎูุงุฏู ุงูุจุนูุฏุฉ (RTT ุฃุทูู โ ุฅุฏุงุฑุฉ ุทุงุจูุฑ ุฃูุซุฑ ุตุจุฑุงู)
- **ุชุญูู ูุซุงูู ูู bufferbloat** ูุชููู ูุน ุธุฑูู ุงูุดุจูุฉ ุงููุนููุฉ ุจุฏูุงู ูู ุงูุงูุชุฑุงุถุงุช

ูุฐุง ูููุฏ ุจุดูู ุฎุงุต ูููุณุชุฎุฏููู ุงูุฐูู ูุตููู ุจุงูุชุธุงู ููุตุงุฏุฑ ูุญุชูู ูุชููุนุฉุ ุฃู ูุนูููู ูุน ุฎุฏูุงุช ุฏูููุฉุ ุฃู ูุนูุดูู ูู ููุงุทู ุญูุซ ุญุฑูุฉ ุงูุฅูุชุฑูุช ุชุณุงูุฑ ุนุงุฏุฉ ูุณุงูุงุช ูุจูุฑุฉ.

## ๐ ุงูููุฒุงุช

- **ูุดู RTT ุงูุชููุงุฆู**: ูุฑุงูุจ ุงูุงุชุตุงูุงุช ุงููุดุทุฉ ุนุจุฑ `/proc/net/nf_conntrack` ููููุณ RTT ูููุถูููู ุงูุฎุงุฑุฌููู
- **ุชุตููุฉ ุงููุถูููู ุงูุฐููุฉ**: ูุตูู ุชููุงุฆูุงู ุนูุงููู LAN ููุฑูุฒ ุนูู ุงููุถูููู ุงูุฎุงุฑุฌููู
- **ุฎูุงุฑุฒููุฉ RTT ุงูุฐููุฉ**: ูุณุชุฎุฏู ping ุงููุฏูุฌ ูููุงุณ ูู ูุถูู ุจุดูู ูุฑุฏู (3 pings ููู ูุถูู)ุ ุซู ูุฎุชุงุฑ ุจุฐูุงุก ุจูู ูุชูุณุท RTT ูุฃุณูุฃ ุญุงูุฉ ููุฃุฏุงุก ุงูุฃูุซู
- **ูุดู ุงููุงุฌูุฉ ุงูุชููุงุฆู**: ููุชุดู ุชููุงุฆูุงู ุงููุงุฌูุงุช ูุน CAKE (ููุถู `ifb-*` ููุชูุฒููุ ุงููุงุฌูุงุช ุงูููุฒูุงุฆูุฉ ููุฑูุน)
- **ุชูุงูู ุฎุฏูุฉ OpenWrt**: ูุนูู ูุฎุฏูุฉ OpenWrt ููุงุณุจุฉ ูุน ุจุฏุก ุชุดุบูู ุชููุงุฆู ูุฅุฏุงุฑุฉ ุงูุนูููุงุช
- **ูุนุงููุงุช ูุงุจูุฉ ููุชูููู**: ุฌููุน ูุนุงููุงุช ุงูุชูููุช ูุงูุณููู ูุงุจูุฉ ููุชูููู ุนุจุฑ ุชูููู UCI
- **ูุนุงูุฌุฉ ุฃุฎุทุงุก ูููุฉ**: ูุชุนุงูู ุจุฃูุงูุฉ ูุน ุงูุชุจุนูุงุช ุงูููููุฏุฉ ููุดุงูู ุงูุดุจูุฉ ูุชุบููุฑุงุช ุงููุงุฌูุฉ
- **ุชุจุนูุงุช ุฏููุง**: ูุชุทูุจ ููุท ping ูtc - ูุง ุญุงุฌุฉ ูุญุฒู ุฅุถุงููุฉุ ูุณุชุฎุฏู ุฃุฏูุงุช ูุฏูุฌุฉ ูุชููุฑุฉ ุนูู ุฌููุน ุงูุฃูุธูุฉ
- **RTT ุนุงูู ุงูุฏูุฉ**: ูุฏุนู ููู RTT ูุณุฑูุฉ (ูุซู 100.23ms) ูุชูููุช ุดุจูุฉ ุฏููู

## ๐ง ุงูุชูุงูู

**ุชู ุงุฎุชุจุงุฑู ููุนูู:**
- **OpenWrt 24.10.1, r28597-0425664679, ููุตุฉ ุงููุฏู x86/64**

**ุงูุชูุงูู ุงููุชููุน:**
- ุฅุตุฏุงุฑุงุช OpenWrt ุงูุณุงุจูุฉ (21.02+) ูุน ุฏุนู CAKE qdisc
- ุฅุตุฏุงุฑุงุช OpenWrt ุงููุณุชูุจููุฉ ุทุงููุง ุฃู ุงูุชุจุนูุงุช ุงููุทููุจุฉ ูุชููุฑุฉ
- ุฌููุน ูุนูุงุฑูุงุช ุงููุฏู ุงููุฏุนููุฉ ุจูุงุณุทุฉ OpenWrt (ARM, MIPS, x86, ุฅูุฎ.)

**ูุชุทูุจุงุช ุงูุชูุงูู:**
- ูุญุฏุฉ kernel CAKE qdisc
- ุฃุฏุงุฉ ping (ูุถููุฉ ูู ุฌููุน ุชูุฒูุนุงุช Linux ุงูููุงุณูุฉ)
- ุฃุฏุงุฉ tc ุงูููุงุณูุฉ (ุชุญูู ูู ุญุฑูุฉ ุงููุฑูุฑ)
- ุฏุนู /proc/net/nf_conntrack (netfilter conntrack)

## ๐ ุงููุชุทูุจุงุช

### ุงูุชุจุนูุงุช
- **ping**: ุฃุฏุงุฉ ping ุงูููุงุณูุฉ ูููุงุณ RTT (ูุถููุฉ ูู ุฌููุน ุชูุฒูุนุงุช Linux)
- **tc**: ุฃุฏุงุฉ ุชุญูู ุญุฑูุฉ ุงููุฑูุฑ (ุฌุฒุก ูู iproute2)
- **CAKE qdisc**: ูุฌุจ ุฃู ูููู ููููุงู ุนูู ุงููุงุฌูุงุช ุงููุณุชูุฏูุฉ

### ุชุซุจูุช ุงูุชุจุนูุงุช

```bash
# ping ูุถูู ุงูุชุฑุงุถูุงู ูู OpenWrt
# ูุง ุญุงุฌุฉ ูุญุฒู ุฅุถุงููุฉ ููุธููุฉ ping

# CAKE qdisc ุนุงุฏุฉ ูุชููุฑ ูู ุฅุตุฏุงุฑุงุช OpenWrt ุงูุญุฏูุซุฉ
# ุชุญูู ูู ุฏุนู tc ูู CAKE:
tc qdisc help | grep cake
```

## ๐ง ุงูุชุซุจูุช

> [!IMPORTANT]  
> ูุจู ุชุดุบูู ุณูุฑูุจุช ุงูุชุซุจูุชุ ูุฌุจ ุนููู ุชุญุฑูุฑ ููู ุงูุชูููู ูุชุนููู ุฃุณูุงุก ุงููุงุฌูุงุช ุงูุตุญูุญุฉ ููุธุงูู.

1. **ุญุฑุฑ ููู ุงูุชูููู:**

```bash
# ุญุฑุฑ ููู ุงูุชูููู ููุทุงุจู ุฃุณูุงุก ูุงุฌูุงุชู
nano etc/config/cake-autortt
```

2. **ูููู ุฃุณูุงุก ูุงุฌูุงุชู:**

ุญุฏุซ ุฅุนุฏุงุฏุงุช `dl_interface` (ุงูุชูุฒูู) ู`ul_interface` (ุงูุฑูุน) ูุชุทุงุจู ุฅุนุฏุงุฏ ุดุจูุชู:

```bash
# ุฃูุซูุฉ ุชูููู ูุฅุนุฏุงุฏุงุช ูุฎุชููุฉ:

# ูุฅุนุฏุงุฏ OpenWrt SQM ุงููููุฐุฌู ุจุงุณุชุฎุฏุงู ูุงุฌูุงุช ifb:
option dl_interface 'ifb-wan'      # ูุงุฌูุฉ ุงูุชูุฒูู (ุนุงุฏุฉ ifb-*)
option ul_interface 'wan'          # ูุงุฌูุฉ ุงูุฑูุน (ุนุงุฏุฉ wan, eth0, ุฅูุฎ.)

# ูุฅุนุฏุงุฏ ูุงุฌูุฉ ูุจุงุดุฑุฉ:
option dl_interface 'eth0'         # ูุงุฌูุฉ WAN ุงูุฎุงุตุฉ ุจู
option ul_interface 'eth0'         # ููุณ ุงููุงุฌูุฉ ูููุง ุงูุงุชุฌุงููู

# ูุฃุณูุงุก ูุงุฌูุงุช ูุฎุตุตุฉ:
option dl_interface 'ifb4eth1'     # ูุงุฌูุฉ ุงูุชูุฒูู ุงููุญุฏุฏุฉ ุงูุฎุงุตุฉ ุจู
option ul_interface 'eth1'         # ูุงุฌูุฉ ุงูุฑูุน ุงููุญุฏุฏุฉ ุงูุฎุงุตุฉ ุจู
```

**ููููุฉ ุงูุนุซูุฑ ุนูู ุฃุณูุงุก ูุงุฌูุงุชู:**
```bash
# ุงุณุฑุฏ ุงููุงุฌูุงุช ูุน CAKE qdisc
tc qdisc show | grep cake

# ุงุณุฑุฏ ุฌููุน ูุงุฌูุงุช ุงูุดุจูุฉ
ip link show

# ุชุญูู ูู ุชูููู ูุงุฌูุฉ SQM (ุฅุฐุง ููุช ุชุณุชุฎุฏู SQM)
uci show sqm
```

### ุงูุชุซุจูุช ุงูุณุฑูุน

1. **ูููู ุงููุงุฌูุงุช (ุงูุธุฑ ุงููุณู ุฃุนูุงู)**

2. **ุดุบูู ุณูุฑูุจุช ุงูุชุซุจูุช:**

```bash
# ุงุฌุนู ุณูุฑูุจุช ุงูุชุซุจูุช ูุงุจูุงู ููุชูููุฐ ูุดุบููู
chmod +x install.sh
./install.sh
```

### ุงูุชุซุจูุช ุงููุฏูู

1. **ุงูุณุฎ ูููุงุช ุงูุฎุฏูุฉ ุฅูู ููุฌู OpenWrt ุงูุฎุงุต ุจู:**

```bash
# ุงูุณุฎ ุงูููู ุงูุชูููุฐู ุงูุฑุฆูุณู
cp usr/bin/cake-autortt /usr/bin/
chmod +x /usr/bin/cake-autortt

# ุงูุณุฎ ุณูุฑูุจุช init
cp etc/init.d/cake-autortt /etc/init.d/
chmod +x /etc/init.d/cake-autortt

# ุงูุณุฎ ููู ุงูุชูููู
cp etc/config/cake-autortt /etc/config/

# ุงูุณุฎ ุณูุฑูุจุช hotplug
cp etc/hotplug.d/iface/99-cake-autortt /etc/hotplug.d/iface/
chmod +x /etc/hotplug.d/iface/99-cake-autortt
```

2. **ูุนูู ูุงุจุฏุฃ ุงูุฎุฏูุฉ:**

```bash
# ูุนูู ุงูุฎุฏูุฉ ููุจุฏุก ุงูุชููุงุฆู ุนูุฏ ุงูุฅููุงุน
/etc/init.d/cake-autortt enable

# ุงุจุฏุฃ ุงูุฎุฏูุฉ
/etc/init.d/cake-autortt start
```

## ๐๏ธ ุฅูุบุงุก ุงูุชุซุจูุช

ูุฅุฒุงูุฉ cake-autortt ูู ูุธุงูู:

```bash
# ุงุฌุนู ุณูุฑูุจุช ุฅูุบุงุก ุงูุชุซุจูุช ูุงุจูุงู ููุชูููุฐ ูุดุบููู
chmod +x uninstall.sh
./uninstall.sh
```

ุณูุฑูุจุช ุฅูุบุงุก ุงูุชุซุจูุช ุณูู:
- ูููู ููุนุทู ุงูุฎุฏูุฉ
- ูุฒูู ุฌููุน ุงููููุงุช ุงููุซุจุชุฉ
- ูุฒูู ุงุฎุชูุงุฑูุงู ูููุงุช ุงูุชูููู ูุงููุณุฎ ุงูุงุญุชูุงุทูุฉ
- ููุธู ุงููููุงุช ุงููุคูุชุฉ

## โ๏ธ ุงูุชูููู

### ๐ง ุชูููู ุงููุงุฌูุฉ (ูุทููุจ)

**ุฃูู ุฎุทูุฉ ุชูููู ูู ุชุนููู ุฃุณูุงุก ุงููุงุฌูุงุช ุงูุตุญูุญุฉ.** ุงูุฎุฏูุฉ ูู ุชุนูู ุจุดูู ุตุญูุญ ุจุฏูู ุฃุณูุงุก ุงููุงุฌูุงุช ุงูุตุญูุญุฉ.

```bash
# ุนุฑุถ ุงูุชูููู ุงูุญุงูู
uci show cake-autortt

# ูุทููุจ: ุชุนููู ุฃุณูุงุก ูุงุฌูุงุชู
uci set cake-autortt.global.dl_interface='your-download-interface'
uci set cake-autortt.global.ul_interface='your-upload-interface'
uci commit cake-autortt

# ุชุบููุฑุงุช ุชูููู ุงุฎุชูุงุฑูุฉ ุฃุฎุฑู
uci set cake-autortt.global.rtt_update_interval='5'
uci set cake-autortt.global.debug='1'
uci commit cake-autortt

# ุฃุนุฏ ุชุดุบูู ุงูุฎุฏูุฉ ูุชุทุจูู ุงูุชุบููุฑุงุช
/etc/init.d/cake-autortt restart
```

ุงูุฎุฏูุฉ ููููุฉ ุนุจุฑ UCI. ุญุฑุฑ `/etc/config/cake-autortt` ุฃู ุงุณุชุฎุฏู ุฃูุงูุฑ `uci`.

### ูุนุงููุงุช ุงูุชูููู

| ุงููุนุงูู | ุงูุงูุชุฑุงุถู | ุงููุตู |
|-----------|---------|-------------|
| `dl_interface` | auto | ุงุณู ูุงุฌูุฉ ุงูุชูุฒูู (ูุซู 'ifb-wan', 'ifb4eth1') |
| `ul_interface` | auto | ุงุณู ูุงุฌูุฉ ุงูุฑูุน (ูุซู 'wan', 'eth1') |
| `rtt_update_interval` | 5 | ุงูุซูุงูู ุจูู ุชุญุฏูุซุงุช ูุนุงูู qdisc RTT |
| `min_hosts` | 3 | ุงูุญุฏ ุงูุฃุฏูู ูุนุฏุฏ ุงููุถูููู ุงููุทููุจ ูุญุณุงุจ RTT |
| `max_hosts` | 100 | ุงูุญุฏ ุงูุฃูุตู ูุนุฏุฏ ุงููุถูููู ูููุญุต ุงููุชุณูุณู |
| `rtt_margin_percent` | 10 | ูุงูุด ุงูุฃูุงู ุงููุถุงู ุฅูู RTT ุงูููุงุณ (ูุณุจุฉ ูุฆููุฉ) |
| `default_rtt_ms` | 100 | RTT ุงูุงูุชุฑุงุถู ุนูุฏูุง ูุง ุชุชููุฑ ูุถูููู ูุงูููู |
| `debug` | 0 | ุชูุนูู ุณุฌู ุงูุชุตุญูุญ (0=ุฅููุงู, 1=ุชุดุบูู) |

> [!NOTE]  
> ุจูููุง ูุนุงููุงุช ุงููุงุฌูุฉ ููุง ุงูุชุฑุงุถู "auto"ุ ุงููุดู ุงูุชููุงุฆู ูุฏ ูุง ูุนูู ุจุดูู ููุซูู ูู ุฌููุน ุงูุชููููุงุช. ูููุตุญ ุจุดุฏุฉ ุจุชุนููู ูุฐู ุงูููู ุตุฑุงุญุฉ.

> [!TIP]  
> ููุดุจูุงุช ุนุงููุฉ ุงููุดุงุท (ูุซู ุญุฑู ุฌุงูุนูุ ุดุจูุงุช ุนุงูุฉ ูุน ุงูุนุฏูุฏ ูู ุงููุณุชุฎุฏููู ุงููุดุทูู)ุ ููุฑ ูู ุถุจุท `rtt_update_interval` ุจูุงุกู ุนูู ุฎุตุงุฆุต ุดุจูุชู. ุงูุงูุชุฑุงุถู 5 ุซูุงูู ูุนูู ุจุดูู ุฌูุฏ ููุนุธู ุงูุญุงูุงุชุ ููู ููููู ุฒูุงุฏุชู ุฅูู 10-15 ุซุงููุฉ ููุดุจูุงุช ุงูุฃูุซุฑ ุงุณุชูุฑุงุฑุงู ุฃู ุชููููู ุฅูู 3 ุซูุงูู ููุจูุฆุงุช ุงูุฏููุงููููุฉ ุฌุฏุงู.

## ๐ ููู ูุนูู

1. **ูุฑุงูุจุฉ ุงูุงุชุตุงู**: ูุญูู ุฏูุฑูุงู `/proc/net/nf_conntrack` ูุชุญุฏูุฏ ุงุชุตุงูุงุช ุงูุดุจูุฉ ุงููุดุทุฉ
2. **ุชุตููุฉ ุงููุถูู**: ูุณุชุฎุฑุฌ ุนูุงููู IP ุงููุฌูุฉ ููุตูู ุงูุนูุงููู ุงูุฎุงุตุฉ/LAN
3. **ููุงุณ RTT**: ูุณุชุฎุฏู `ping` ูููุงุณ ูู ูุถูู ุฎุงุฑุฌู ุจุดูู ูุฑุฏู (3 pings ููู ูุถูู)
4. **ุงุฎุชูุงุฑ RTT ุงูุฐูู**: ููุญุต ุงููุถูููู ุจุดูู ูุชุณูุณู ูููุน ุงุฒุฏุญุงู ุงูุดุจูุฉุ ูุญุณุจ ูุชูุณุท RTT ูุฃุณูุฃ ุญุงูุฉุ ุซู ูุณุชุฎุฏู ุงููููุฉ ุงูุฃุนูู ูุถูุงู ุงูุฃุฏุงุก ุงูุฃูุซู ูุฌููุน ุงูุงุชุตุงูุงุช
5. **ูุงูุด ุงูุฃูุงู**: ูุถูู ูุงูุดุงู ูุงุจูุงู ููุชูููู ุฅูู RTT ุงูููุงุณ ูุถูุงู ุชุฎุฒูู ูุคูุช ูุงูู
6. **ุชุญุฏูุซ qdisc**: ูุญุฏุซ ูุนุงูู CAKE qdisc RTT ุนูู ูุงุฌูุงุช ุงูุชูุฒูู ูุงูุฑูุน

### ๐ง ุฎูุงุฑุฒููุฉ RTT ุงูุฐููุฉ

ุงุจุชุฏุงุกู ูู ุงูุฅุตุฏุงุฑ 1.2.0ุ cake-autortt ูููุฐ ุฎูุงุฑุฒููุฉ ุงุฎุชูุงุฑ RTT ุฐููุฉ ุจูุงุกู ุนูู ุชูุตูุฉ Dave Tรคht (ูุคูู ูุดุงุฑู ูู CAKE):

**ุงููุดููุฉ**: ุงุณุชุฎุฏุงู ูุชูุณุท RTT ููุท ูููู ุฃู ูููู ูุดููุฉ ุนูุฏูุง ุชุญุชูู ุจุนุถ ุงููุถูููู ุนูู ุฒูู ุงุณุชุฌุงุจุฉ ุฃุนูู ุจุดูู ูุจูุฑ ูู ุงูุขุฎุฑูู. ุนูู ุณุจูู ุงููุซุงูุ ุฅุฐุง ูุงู ูุฏูู 100 ูุถูู ุจูุชูุณุท RTT 40msุ ููู 2 ูุถูู ูุฏูููุง RTT 234ms ู240msุ ุงุณุชุฎุฏุงู ูุชูุณุท 40ms ูููู ุฃู ูุณุจุจ ูุดุงูู ุฃุฏุงุก ููุฐู ุงูุงุชุตุงูุงุช ุนุงููุฉ ุงูุฒูู.

**ุงูุญู**: ุงูุฎูุงุฑุฒููุฉ ุงูุญุงููุฉ:
1. **ุชุญุณุจ ููุงู ูู ูุชูุณุท RTT ูุฃุณูุฃ ุญุงูุฉ** ูู ุฌููุน ุงููุถูููู ุงููุณุชุฌูุจูู
2. **ุชูุงุฑู ุงููููุชูู** ูุชุฎุชุงุฑ ุจุฐูุงุก ุงููููุฉ ุงูููุงุณุจุฉ
3. **ุชุณุชุฎุฏู ุฃุณูุฃ ุญุงูุฉ RTT ุนูุฏูุง ุชููู ุฃุนูู ุจุดูู ูุจูุฑ** ูู ุงููุชูุณุท ูุถูุงู ุฃุฏุงุก ุฌูุฏ ูุฌููุน ุงูุงุชุตุงูุงุช
4. **ุชุณุชุฎุฏู ูุชูุณุท RTT ุนูุฏูุง ุชููู ุฃุณูุฃ ุญุงูุฉ RTT ูุฑูุจุฉ** ูู ุงููุชูุณุท ูุชุฌูุจ ุงูุฅุนุฏุงุฏุงุช ุงููุญุงูุธุฉ ุฌุฏุงู

**ููุงุฐุง ูุฐุง ููู**: ูููุงู ูู [Dave Tรคht](https://forum.mikrotik.com/t/fq-codel-cake-stories/181067/17)ุ "ูู ุงูุฃูุถูุ ุฎุงุตุฉ ูุน ุงูุชุดููู ุงูุฏุงุฎูุ ุงุณุชุฎุฏุงู RTT ุงููููุฐุฌู ูุชูุฏูุฑ ููุญุตูู ุนูู ุชุญูู ูู ุงูุทุงุจูุฑ ูุจู ูุตููู ุฅูู ูุดูู ISP ุงูุฐู ุชุญุงูู ุงูุชุบูุจ ุนููู." ููุน ุฐููุ ุฅุฐุง ูุงู RTT ุงููุนูู ูุฃู ูุถูู ุฃุทูู ูู RTT ุงููุนูู ุนูู ูุงุฌูุฉ CAKEุ ูููู ุฃู ูุชุฃุซุฑ ุงูุฃุฏุงุก ุจุดูู ูุจูุฑ.

**ูุซุงู ูู ุงูุนุงูู ุงูุญูููู**:
- 98 ูุถูู ูุน RTT 30-50ms (ูุชูุณุท: 42ms)
- 2 ูุถูู ูุน RTT 200ms+ (ุฃุณูุฃ: 234ms)
- **ุงูุฎูุงุฑุฒููุฉ ุงููุฏููุฉ**: ุณุชุณุชุฎุฏู ูุชูุณุท 45msุ ูุณุจุจุฉ ูุดุงูู ูููุถูููู 200ms+
- **ุงูุฎูุงุฑุฒููุฉ ุงูุฌุฏูุฏุฉ**: ุชุณุชุฎุฏู ุฃุณูุฃ ุญุงูุฉ RTT 234msุ ูุถูููุฉ ุฃุฏุงุก ูุซุงูู ูุฌููุน ุงูุงุชุตุงูุงุช

### ูุซุงู ุชุฏูู ุงูุงุชุตุงู

```
[ุฌูุงุฒ LAN] โ [ููุฌู CAKE] โ [ุงูุฅูุชุฑูุช]
                       โ
                 cake-autortt ูุฑุงูุจ
                 ุงูุงุชุตุงูุงุช ุงููุดุทุฉ ููุถุจุท
                 ูุนุงูู RTT
```

## ๐ ุงูุณููู ุงููุชููุน

ุจุนุฏ ุงูุชุซุจูุช ูุงูุจุฏุกุ ูุฌุจ ุฃู ุชูุงุญุธ:

### ุงูุชุฃุซูุฑุงุช ุงูููุฑูุฉ
- ุงูุฎุฏูุฉ ุชุจุฏุฃ ุชููุงุฆูุงู ูุชุจุฏุฃ ูุฑุงูุจุฉ ุงูุงุชุตุงูุงุช
- ููุงุณุงุช RTT ุชูุณุฌู ูู ุณุฌู ุงููุธุงู (ุฅุฐุง ูุงู ุงูุชุตุญูุญ ููุนูุงู)
- ูุนุงูู CAKE qdisc RTT ููุญุฏุซ ูู 5 ุซูุงูู ุจูุงุกู ุนูู ุธุฑูู ุงูุดุจูุฉ ุงูููุงุณุฉ
- ููู RTT ุนุงููุฉ ุงูุฏูุฉ (ูุซู 44.89ms) ุชูุทุจู ุนูู CAKE qdisc

### ุงูููุงุฆุฏ ุทูููุฉ ุงููุฏู
- **ุงุณุชุฌุงุจุฉ ูุญุณูุฉ**: ูุนุงูู RTT ููุญุฏุซ ูุน ุธุฑูู ุงูุดุจูุฉ ุงููุนููุฉ
- **ุชุญูู ุฃูุถู ูู Bufferbloat**: CAKE ููููู ุงุชุฎุงุฐ ูุฑุงุฑุงุช ุฅุฏุงุฑุฉ ุทุงุจูุฑ ุฃูุซุฑ ุงุณุชูุงุฑุฉ
- **ุฃุฏุงุก ุชูููู**: ูุชููู ุชููุงุฆูุงู ูุน ุธุฑูู ุงูุดุจูุฉ ุงููุชุบูุฑุฉ (ููุฑ ุตูุงุนูุ ูุญูููุ ุฑูุงุจุท ูุฒุฏุญูุฉ)
- **ุฏูุฉ ุฃุนูู**: ูุฃุฎุฐ ุนููุงุช ูู ุญุชู 100 ูุถูู (ูุงุจู ููุชูููู) ูุชูุซูู ุฃูุถู ูุธุฑูู ุงูุดุจูุฉ

### ุงููุฑุงูุจุฉ

```bash
# ุชุญูู ูู ุญุงูุฉ ุงูุฎุฏูุฉ
/etc/init.d/cake-autortt status

# ุนุฑุถ ุณุฌูุงุช ุงูุฎุฏูุฉ
logread | grep cake-autortt

# ุฑุงูุจ ูุนุงููุงุช CAKE qdisc
tc qdisc show | grep cake

# ูุถุน ุงูุชุตุญูุญ ููุณุฌูุงุช ุงูููุตูุฉ
uci set cake-autortt.global.debug='1'
uci commit cake-autortt
/etc/init.d/cake-autortt restart
```

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง

### ุงููุดุงูู ุงูุดุงุฆุนุฉ

1. **ุงูุฎุฏูุฉ ูุง ุชุจุฏุฃ**
   ```bash
   # ุชุญูู ูู ุงูุชุจุนูุงุช
   which ping tc
   
   # ุชุญูู ูู ูุงุฌูุงุช CAKE
   tc qdisc show | grep cake
   ```

2. **ูุง ุชูุฌุฏ ุชุญุฏูุซุงุช RTT**
   ```bash
   # ูุนูู ูุถุน ุงูุชุตุญูุญ
   uci set cake-autortt.global.debug='1'
   uci commit cake-autortt
   /etc/init.d/cake-autortt restart
   
   # ุชุญูู ูู ุงูุณุฌูุงุช
   logread | grep cake-autortt
   ```

3. **ูุดู ูุดู ุงููุงุฌูุฉ**
   ```bash
   # ุญุฏุฏ ุงููุงุฌูุงุช ูุฏููุงู
   uci set cake-autortt.global.dl_interface='ifb-wan'
   uci set cake-autortt.global.ul_interface='wan'
   uci commit cake-autortt
   /etc/init.d/cake-autortt restart
   ```

### ูุนูููุงุช ุงูุชุตุญูุญ

ูุน ุชูุนูู ุงูุชุตุญูุญ (`uci set cake-autortt.global.debug='1'`)ุ ุงูุฎุฏูุฉ ุชููุฑ ุณุฌูุงุช ููุตูุฉ:

**ูุซุงู ูุฎุฑุฌุงุช ุงูุชุตุญูุญ:**
```bash
[2025-01-09 18:34:22] cake-autortt DEBUG: ุงุณุชุฎุฑุงุฌ ุงููุถูููู ูู conntrack
[2025-01-09 18:34:22] cake-autortt DEBUG: ููุฌุฏ 35 ูุถูู ุบูุฑ LAN
[2025-01-09 18:34:22] cake-autortt DEBUG: ููุงุณ RTT ุจู ping ูู 35 ูุถูู (3 pings ููู ูุถูู)
[2025-01-09 18:34:25] cake-autortt DEBUG: ููุฎุต ping: 28/35 ูุถูู ุญู
[2025-01-09 18:34:25] cake-autortt DEBUG: ุงุณุชุฎุฏุงู ูุชูุณุท RTT: 45.2ms (ูุชูุณุท: 45.2msุ ุฃุณูุฃ: 89.1ms)
[2025-01-09 18:34:25] cake-autortt DEBUG: ุงุณุชุฎุฏุงู RTT ุงูููุงุณ: 45.2ms
[2025-01-09 18:34:35] cake-autortt INFO: ุชุนููู CAKE RTT ุฅูู 49.72ms (49720us)
[2025-01-09 18:34:35] cake-autortt DEBUG: RTT ูุญุฏุซ ุนูู ูุงุฌูุฉ ุงูุชูุฒูู ifb-wan
[2025-01-09 18:34:35] cake-autortt DEBUG: RTT ูุญุฏุซ ุนูู ูุงุฌูุฉ ุงูุฑูุน wan
```

> [!NOTE]  
> **ุชุณุฌูู ูุนุงู ููุฐุงูุฑุฉ**: ุณุฌูุงุช ุงูุชุตุญูุญ ูุญุณูุฉ ูููุน ููุถ ุงูุณุฌู. ููุงุณุงุช RTT ูููุถูููู ุงููุฑุฏููู ูุง ุชูุณุฌู ูุชูููู ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ ููุชุงุจุฉ ุงููุฑุต. ููุท ุงููุนูููุงุช ุงูููุฎุตุฉ ุชูุณุฌูุ ููุง ูุฌุนููุง ููุงุณุจุฉ ููุชุดุบูู ุงููุณุชูุฑ ุจุฏูู ููู ููุฑุท ููุณุฌู.

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุชุญุช GNU General Public License v2.0 - ุงูุธุฑ ููู [LICENSE](LICENSE) ููุชูุงุตูู.

## ๐ค ุงููุณุงููุฉ

ุงููุณุงููุงุช ูุฑุญุจ ุจูุง! ูุฑุฌู ุฅุฑุณุงู Pull Request.